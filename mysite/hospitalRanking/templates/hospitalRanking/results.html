{% extends 'base.html' %}

{% block title %}Hospital Ranking Results{% endblock %}

<head>
    {% load staticfiles %}
</head>

{% block body %}
<div class="container">

    <div class="page-header text-center">
        <h2>Hospital Ranking Results</h2>
        <h4>Need to make another search? Click <a href="{% url 'hospitalRanking:index' %}"> here</a>.</h4>
    </div>

    <div class="panel panel-primary">
        <div class="panel-heading text-center">
            <h3 class="panel-title">Hospital Ranking Submitted Form</h3>
        </div>
        <div class="panel-body">
            <!-- This just prints the dictionary we pass here -->
            <form class="form-horizontal">
                <div class="row">
                    <h4 class="text-center">Location</h4>
                    <div class="col-sm-offset-3 col-sm-6">
                        <label for="location" class="col-sm-4 control-label">City</label>
                        <div class="col-sm-8">
                            <input id="location" class="form-control" name="location" value="{{ context.location_options.Location }}" disabled>
                        </div>
                    </div>
                </div>

                <hr>

                <div class="row">
                    <h4 class="text-center">Priorities</h4>
                    {% for key,value in context.priorities.items %}
                        <div class="col-sm-6">
                            <div class="form-group">

                                <label for="CostOfCare" class="col-sm-4 control-label">{{ key }}</label>
                                <div class="col-sm-8">
                                    <input id="CostOfCare" class="form-control" type="text" name="CostOfCare"
                                        data-provide="slider"
                                        data-slider-min="0.75"
                                        data-slider-max="1.25"
                                        data-slider-step="0.05"
                                        data-slider-value="{{ value }}"
                                        data-slider-ticks="[0.75, 1.0, 1.25]"
                                        data-slider-ticks-labels='["Low", "Medium", "High"]'
                                        data-slider-enabled="false">
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </form>
        </div>
    </div>

    <div class="panel panel-primary">
        <div class="panel-heading text-center">
            <h3 class="panel-title">Ranked Hospitals</h3>
        </div>
        <div class="panel-body">
            <!-- This just prints the dictionary we pass here -->
            <form class="form-horizontal">
                <div class="row">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Hospital</th>
                                <th>Overall Score</th>
                                <th>Payment Score</th>
                                <th>Doctors Score</th>
                                <th>Complications Score</th>
                                <th>Returns Score</th>
                                <th>Timely Score</th>
                            </tr>
                        </thead>
                        <tbody>
                        {% for hospital in context.hospitals %}
                        <tr>
                            <td><a href="hospital/{{ hospital.provider_id }}">{{ hospital.name | title }}</a></td>
                            <td><div id="overallScore-{{ hospital.provider_id }}" class="col-sm-6"></div></td>
                            <td><div id="payment-{{ hospital.provider_id }}" class="col-sm-6"></div></td>
                            <td><div id="doctors-{{ hospital.provider_id }}" class="col-sm-6"></div></td>
                            <td><div id="complications-{{ hospital.provider_id }}" class="col-sm-6"></div></td>
                            <td><div id="returns-{{ hospital.provider_id }}" class="col-sm-6"></div></td>
                            <td><div id="timely-{{ hospital.provider_id }}" class="col-sm-6"></div></td>
                        </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                {% comment %}
                    {% for hospital in context.hospitals %}
                        <div class="col-sm-12">
                            <p><a href="hospital/{{ hospital.provider_id }}">{{ hospital.name }}</a></p>
                            <div class="row">
                                <div class="col-sm-12">
                                    <label for="overallScore-{{ hospital.provider_id }}">Overall Score</label>
                                    <div id="overallScore-{{ hospital.provider_id }}" class="col-sm-1"></div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-sm-12">
                                    <label for="payment-{{ hospital.provider_id }}">Payment Score</label>
                                    <div id="payment-{{ hospital.provider_id }}" class="col-sm-1"></div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-sm-12">
                                    <label for="doctors-{{ hospital.provider_id }}">Doctors Score</label>
                                    <div id="doctors-{{ hospital.provider_id }}" class="col-sm-1"></div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-sm-12">
                                    <label for="complications-{{ hospital.provider_id }}">Complications Score</label>
                                    <div id="complications-{{ hospital.provider_id }}" class="col-sm-1"></div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-sm-12">
                                    <label for="returns-{{ hospital.provider_id }}">Returns Score</label>
                                    <div id="returns-{{ hospital.provider_id }}" class="col-sm-1"></div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-sm-12">
                                    <label for="timely-{{ hospital.provider_id }}">Timely Score</label>
                                    <div id="timely-{{ hospital.provider_id }}" class="col-sm-1"></div>
                                </div>
                            </div>

                            <p> {{ hospital.n_payment|floatformat:2 }} | {{ hospital.n_md|floatformat:2 }} | {{ hospital.n_complications|floatformat:2 }} | {{ hospital.n_returns|floatformat:2 }} | {{ hospital.n_timely|floatformat:2 }}</p>
                            <hr />
                        </div>
                    {% endfor %}
                    {% endcomment %}
                </div>
            </form>
        </div>
    </div>


</div>

<script src="{% static 'hospitalRanking/js/results.js' %}"></script>
<script>
$(function () {
    {% for hospital in context.hospitals %}
        createCircleProgressBar("#overallScore-{{ hospital.provider_id }}", {{ hospital.score }} );
        createCircleProgressBar("#payment-{{ hospital.provider_id }}", {{ hospital.n_payment }} );
        createCircleProgressBar("#doctors-{{ hospital.provider_id }}", {{ hospital.n_md }} );
        createCircleProgressBar("#complications-{{ hospital.provider_id }}", {{ hospital.n_complications }} );
        createCircleProgressBar("#returns-{{ hospital.provider_id }}", {{ hospital.n_returns }} );
        createCircleProgressBar("#timely-{{ hospital.provider_id }}", {{ hospital.n_timely }} );
    {% endfor %}

});
</script>
{% endblock %}